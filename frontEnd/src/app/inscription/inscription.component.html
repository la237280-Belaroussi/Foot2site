<div class="inscription-container">
  <div class="inscription-card">

    <h2>CrÃ©er un compte</h2>
    <p class="subtitle">Vous serez automatiquement enregistrÃ© comme client</p>

    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <label>PrÃ©nom *</label>
        <input type="text" class="form-control" formControlName="firstname" placeholder="Jean" />
        <small *ngIf="firstname?.invalid && firstname?.touched" class="text-danger">
          Minimum 2 caractÃ¨res
        </small>
      </div>

      <div class="form-group">
        <label>Nom *</label>
        <input type="text" class="form-control" formControlName="lastname" placeholder="Dupont" />
        <small *ngIf="lastname?.invalid && lastname?.touched" class="text-danger">
          Minimum 2 caractÃ¨res
        </small>
      </div>

<div class="form-group">
  <label>Email *</label>

  <input
    type="email"
    class="form-control"
    formControlName="email"
    placeholder="jean.dupont@email.com"
  />

  <!-- Email invalide (Angular) -->
  <small
    *ngIf="email?.touched && email?.errors?.['email'] && !emailAlreadyExists"
    class="text-danger"
  >
    Email invalide
  </small>

  <!-- Email requis -->
  <small
    *ngIf="email?.touched && email?.errors?.['required'] && !emailAlreadyExists"
    class="text-danger"
  >
    Email requis
  </small>

  <!-- Email dÃ©jÃ  utilisÃ© (Backend) -->
  <small *ngIf="emailAlreadyExists" class="text-danger">
    Cet email est dÃ©jÃ  utilisÃ©
  </small>
</div>


      <div class="form-group">
        <label>Mot de passe *</label>
        <div class="password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            formControlName="password"
            placeholder="Minimum 6 caractÃ¨res"
          />
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
            ğŸ‘ï¸
          </button>
        </div>
        <small *ngIf="password?.invalid && password?.touched" class="text-danger">
          Minimum 6 caractÃ¨res requis
        </small>
      </div>

      <div class="form-group">
        <label>Confirmer le mot de passe *</label>
        <input type="password" class="form-control" formControlName="confirmPassword"
               placeholder="RÃ©pÃ©tez le mot de passe" />
        <small
          *ngIf="registerForm.errors?.['passwordsMismatch'] && confirmPassword?.touched"
          class="text-danger">
          Les mots de passe ne correspondent pas
        </small>
      </div>

      <fieldset class="address-section">
        <legend>Adresse de livraison</legend>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="Rue de la Paix"
                 formControlName="addressRue" />
        </div>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="NumÃ©ro (ex: 12)"
                 formControlName="addressNumero" />
        </div>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="Code postal (ex: 1000)"
                 formControlName="addressCode" />
        </div>
      </fieldset>

      <button type="submit" class="btn-primary"
              [disabled]="loading || registerForm.invalid">
        {{ loading ? 'Inscription...' : 'Sâ€™inscrire' }}
      </button>

      <div class="link-section">
        DÃ©jÃ  un compte ?
        <a routerLink="/connection">Se connecter</a>
      </div>

    </form>
  </div>
</div>
