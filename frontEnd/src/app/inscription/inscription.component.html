<div class="inscription-container">
  <h2>CrÃ©er un compte</h2>
  <p class="subtitle">Vous serez automatiquement enregistrÃ© comme client</p>

  <div *ngIf="successMessage()" class="alert alert-success">
    {{ successMessage() }}
  </div>

  <div *ngIf="errorMessage()" class="alert alert-danger">
    {{ errorMessage() }}
  </div>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

    <!-- PrÃ©nom -->
    <div class="form-group">
      <label for="firstname">PrÃ©nom *</label>
      <input
        type="text"
        id="firstname"
        formControlName="firstname"
        class="form-control"
        placeholder="Jean"
        [class.is-invalid]="firstname?.invalid && firstname?.touched">

      <small class="text-danger" *ngIf="firstname?.invalid && firstname?.touched">
        <span *ngIf="firstname?.errors?.['required']">Le prÃ©nom est requis</span>
        <span *ngIf="firstname?.errors?.['minlength']">Minimum 2 caractÃ¨res</span>
      </small>
    </div>

    <!-- Nom -->
    <div class="form-group">
      <label for="lastname">Nom *</label>
      <input
        type="text"
        id="lastname"
        formControlName="lastname"
        class="form-control"
        placeholder="Dupont"
        [class.is-invalid]="lastname?.invalid && lastname?.touched">

      <small class="text-danger" *ngIf="lastname?.invalid && lastname?.touched">
        <span *ngIf="lastname?.errors?.['required']">Le nom est requis</span>
        <span *ngIf="lastname?.errors?.['minlength']">Minimum 2 caractÃ¨res</span>
      </small>
    </div>

    <!-- Email -->
    <div class="form-group">
      <label for="email">Email *</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        class="form-control"
        placeholder="jean.dupont@example.com"
        [class.is-invalid]="email?.invalid && email?.touched">

      <small class="text-danger" *ngIf="email?.invalid && email?.touched">
        <span *ngIf="email?.errors?.['required']">L'email est requis</span>
        <span *ngIf="email?.errors?.['email']">Format d'email invalide</span>
      </small>
    </div>

    <!-- Mot de passe -->
    <div class="form-group">
      <label for="password">Mot de passe *</label>
      <div class="password-wrapper">
        <input
          [type]="showPassword() ? 'text' : 'password'"
          id="password"
          formControlName="password"
          class="form-control"
          placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
          [class.is-invalid]="password?.invalid && password?.touched">

        <button
          type="button"
          (click)="togglePasswordVisibility()"
          class="toggle-password">
          {{ showPassword() ? 'ğŸ‘ï¸' : 'ğŸ‘ï¸â€ğŸ—¨ï¸' }}
        </button>
      </div>

      <small class="text-danger" *ngIf="password?.invalid && password?.touched">
        <span *ngIf="password?.errors?.['required']">Mot de passe requis</span>
        <span *ngIf="password?.errors?.['minlength']">Minimum 6 caractÃ¨res</span>
      </small>
    </div>

    <!-- Adresse -->
    <fieldset class="address-section">
      <legend>Adresse de livraison</legend>

      <div class="form-row">
        <div class="form-group col-4">
          <label>NÂ° *</label>
          <input
            type="text"
            formControlName="addressNumero"
            class="form-control">
        </div>

        <div class="form-group col-8">
          <label>Rue *</label>
          <input
            type="text"
            formControlName="addressRue"
            class="form-control">
        </div>
      </div>

      <div class="form-group">
        <label>Code postal *</label>
        <input
          type="text"
          formControlName="addressCode"
          class="form-control">
      </div>
    </fieldset>

    <!-- Bouton -->
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="loading() || registerForm.invalid">

      <span *ngIf="loading()">Inscription en cours...</span>
      <span *ngIf="!loading()">S'inscrire</span>

    </button>

  </form>
</div>
