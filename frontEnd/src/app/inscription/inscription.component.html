<div class="inscription-container">
  <div class="inscription-card">

    <h2>Cr√©er un compte</h2>
    <p class="subtitle">Vous serez automatiquement enregistr√© comme client</p>

    <div *ngIf="successMessage" class="alert alert-success">
      {{ successMessage }}
    </div>

    <div *ngIf="errorMessage" class="alert alert-danger">
      {{ errorMessage }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

      <div class="form-group">
        <label>Pr√©nom *</label>
        <input type="text" class="form-control" formControlName="firstname" placeholder="Jean" />
        <small *ngIf="firstname?.invalid && firstname?.touched" class="text-danger">
          Minimum 2 caract√®res
        </small>
      </div>

      <div class="form-group">
        <label>Nom *</label>
        <input type="text" class="form-control" formControlName="lastname" placeholder="Dupont" />
        <small *ngIf="lastname?.invalid && lastname?.touched" class="text-danger">
          Minimum 2 caract√®res
        </small>
      </div>

<div class="form-group">
  <label>Email *</label>

  <input
    type="email"
    class="form-control"
    formControlName="email"
    placeholder="jean.dupont@email.com"
  />

  <small
    *ngIf="email?.touched && email?.errors?.['email'] && !emailAlreadyExists"
    class="text-danger"
  >
    Email invalide
  </small>

  <small
    *ngIf="email?.touched && email?.errors?.['required'] && !emailAlreadyExists"
    class="text-danger"
  >
    Email requis
  </small>

  <small *ngIf="emailAlreadyExists" class="text-danger">
    Cet email est d√©j√† utilis√©
  </small>
</div>


      <div class="form-group">
        <label>Mot de passe *</label>
        <div class="password-wrapper">
          <input
            [type]="showPassword ? 'text' : 'password'"
            class="form-control"
            formControlName="password"
            placeholder="Minimum 6 caract√®res"
          />
          <button type="button" class="toggle-password" (click)="togglePasswordVisibility()">
            üëÅ
          </button>
        </div>
        <small *ngIf="password?.invalid && password?.touched" class="text-danger">
          Minimum 6 caract√®res requis
        </small>
      </div>

      <div class="form-group">
        <label>Confirmer le mot de passe *</label>
        <input type="password" class="form-control" formControlName="confirmPassword"
               placeholder="R√©p√©tez le mot de passe" />
        <small
          *ngIf="registerForm.errors?.['passwordsMismatch'] && confirmPassword?.touched"
          class="text-danger">
          Les mots de passe ne correspondent pas
        </small>
      </div>

      <fieldset class="address-section">
        <legend>Adresse de livraison</legend>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="Rue de la Paix"
                 formControlName="addressRue" />
        </div>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="Num√©ro (ex: 12)"
                 formControlName="addressNumero" />
        </div>

        <div class="form-group">
          <input type="text" class="form-control" placeholder="Code postal (ex: 1000)"
                 formControlName="addressCode" />
        </div>
      </fieldset>

      <button type="submit" class="btn-primary"
              [disabled]="loading || registerForm.invalid">
        {{ loading ? 'Inscription...' : 'S‚Äôinscrire' }}
      </button>

      <div class="link-section">
        D√©j√† un compte ?
        <a routerLink="/connection">Se connecter</a>
      </div>

    </form>
  </div>
</div>
